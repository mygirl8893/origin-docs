<h1 id='user'>User</h1>
<p>A <strong>User</strong> is an object used to represent a particular user in Origin Protocol.
Users are implemented as <a href="https://medium.com/originprotocol/managing-identity-with-a-ui-for-erc-725-5c7422b38c09">ERC725 identities</a>. Identities in Origin will be portable across platforms that support ERC725.</p>

<p>A user object consists of 4 properties:</p>

<ul>
<li><code>address</code>: Ethereum address for the user contract</li>
<li><code>profile</code>: Profile information a user chooses to reveal publicly

<ul>
<li><code>firstName</code></li>
<li><code>lastName</code></li>
<li><code>description</code></li>
<li><code>avatar</code></li>
</ul></li>
<li><code>attestations</code>: A list of 3rd party attestations that the user has added to their identity (see <a href="#attestation">Attestation documentation</a> for details)</li>
<li><code>identityAddress</code>: Ethereum address for the identity contract</li>
</ul>
<h2 id='user-set'>set</h2>
<blockquote>
<p>To create/update a user</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Get a phone attestation object</span>
<span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">phoneGenerateCode</span><span class="p">({</span>
  <span class="na">phone</span><span class="p">:</span> <span class="s2">"555-555-5555"</span>
<span class="p">})</span>
<span class="kd">let</span> <span class="nx">phoneAttestation</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">phoneVerify</span><span class="p">({</span>
  <span class="na">phone</span><span class="p">:</span> <span class="s2">"555-555-5555"</span><span class="p">,</span>
  <span class="na">code</span><span class="p">:</span> <span class="s2">"123456"</span>
<span class="p">})</span>

<span class="c1">// Get a Facebook attestation object</span>
<span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">facebookAuthUrl</span><span class="p">()</span>

<span class="c1">// Open facebook authentication popup and retrieve authentication code</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'width=650,height=500'</span><span class="p">)</span>
<span class="kd">let</span> <span class="nx">code</span> <span class="o">=</span> <span class="nx">await</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^origin-code:/</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">':'</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="kc">false</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">// Send code to obtain attestation</span>
<span class="kd">let</span> <span class="nx">facebookAttestation</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">facebookVerify</span><span class="p">({</span>
  <span class="na">code</span><span class="p">:</span> <span class="nx">code</span>
<span class="p">})</span>

<span class="kd">let</span> <span class="nx">myNewUser</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">profile</span><span class="p">:</span> <span class="p">{</span> <span class="na">firstName</span><span class="p">:</span> <span class="s2">"Wonder"</span><span class="p">,</span> <span class="na">lastName</span><span class="p">:</span> <span class="s2">"Woman"</span> <span class="p">},</span>
  <span class="na">attestations</span><span class="p">:</span> <span class="p">[</span> <span class="nx">phoneAttestation</span><span class="p">,</span> <span class="nx">facebookAttestation</span> <span class="p">]</span>
<span class="p">}</span>
<span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">myNewUser</span><span class="p">)</span>
<span class="kd">let</span> <span class="nx">createdUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span>

<span class="c1">// User has been created!</span>

<span class="c1">// Get an email attestation object</span>
<span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">emailGenerateCode</span><span class="p">({</span>
  <span class="na">email</span><span class="p">:</span> <span class="s2">"me@my.domain"</span>
<span class="p">})</span>
<span class="kd">let</span> <span class="nx">emailAttestation</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">emailVerify</span><span class="p">({</span>
  <span class="na">email</span><span class="p">:</span> <span class="s2">"me@my.domain"</span><span class="p">,</span>
  <span class="na">code</span><span class="p">:</span> <span class="s2">"123456"</span>
<span class="p">})</span>

<span class="nx">createdUser</span><span class="p">.</span><span class="nx">attestations</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">emailAttestation</span><span class="p">)</span>
<span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">createdUser</span><span class="p">)</span>
<span class="kd">let</span> <span class="nx">updatedUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span>

<span class="c1">// User has been updated!</span>
<span class="c1">// final `updatedUser`:</span>
<span class="p">{</span>
  <span class="p">{</span>
    <span class="na">address</span><span class="p">:</span> <span class="s2">"0x627306090abaB3A6e1400e9345bC60c78a8BEf57"</span><span class="p">,</span>
    <span class="na">profile</span><span class="p">:</span> <span class="p">{</span> <span class="na">firstName</span><span class="p">:</span> <span class="s2">"Wonder"</span><span class="p">,</span> <span class="na">lastName</span><span class="p">:</span> <span class="s2">"Woman"</span> <span class="p">},</span>
    <span class="na">attestations</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">signature</span><span class="p">:</span> <span class="s2">"0xeb6123e537e17e2c67b67bbc0b93e6b25ea9eae276c4c2ab353bd7e853ebad2446cc7e91327f3737559d7a9a90fc88529a6b72b770a612f808ab0ba57a46866e1c"</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="s2">"0x7f5e752d19fee44e13bb0cc820255017c35584caddc055641d6ccadfa3afca01"</span><span class="p">,</span>
        <span class="na">claimType</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="na">service</span><span class="p">:</span> <span class="s2">"phone"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">signature</span><span class="p">:</span> <span class="s2">"0xeb6123e537e17e2c67b67bbc0b93e6b25ea9eae276c4c2ab353bd7e853ebad2446cc7e91327f3737559d7a9a90fc88529a6b72b770a612f808ab0ba57a46866e1c"</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="s2">"0x7f5e752d19fee44e13bb0cc820255017c35584caddc055641d6ccadfa3afca01"</span><span class="p">,</span>
        <span class="na">claimType</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="na">service</span><span class="p">:</span> <span class="s2">"facebook"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">signature</span><span class="p">:</span> <span class="s2">"0xeb6123e537e17e2c67b67bbc0b93e6b25ea9eae276c4c2ab353bd7e853ebad2446cc7e91327f3737559d7a9a90fc88529a6b72b770a612f808ab0ba57a46866e1c"</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="s2">"0x7f5e752d19fee44e13bb0cc820255017c35584caddc055641d6ccadfa3afca01"</span><span class="p">,</span>
        <span class="na">claimType</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="na">service</span><span class="p">:</span> <span class="s2">"twitter"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">signature</span><span class="p">:</span> <span class="s2">"0xeb6123e537e17e2c67b67bbc0b93e6b25ea9eae276c4c2ab353bd7e853ebad2446cc7e91327f3737559d7a9a90fc88529a6b72b770a612f808ab0ba57a46866e1c"</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="s2">"0x7f5e752d19fee44e13bb0cc820255017c35584caddc055641d6ccadfa3afca01"</span><span class="p">,</span>
        <span class="na">claimType</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="na">service</span><span class="p">:</span> <span class="s2">"airbnb"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="na">identityAddress</span><span class="p">:</span> <span class="s2">"0x4E72770760c011647D4873f60A3CF6cDeA896CD8"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>If the user does not already exist, it will be created. If it exists, it will be updated.</p>

<p><strong>Note</strong>: this method should be used as if it will completely override the existing data.
Updates should be made by taking the existing user object, making modifications to it, and then passing the entire updated object into the <code>set</code> method.</p>
<h2 id='user-get'>get</h2>
<blockquote>
<p>To retrieve a user</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kd">let</span> <span class="nx">myUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span>
<span class="kd">let</span> <span class="nx">anotherUser</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">otherUserAddress</span><span class="p">)</span>
<span class="c1">// Returns (user object)</span>
<span class="p">{</span>
  <span class="nl">address</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
  <span class="nx">profile</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">firstName</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">lastName</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">description</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">avatar</span><span class="p">:</span> <span class="s1">''</span>
  <span class="p">},</span>
  <span class="nx">attestations</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nx">identityAddress</span><span class="p">:</span> <span class="s1">''</span>
<span class="p">}</span>
</code></pre>
<p>With no parameters passed in, this will return the current user.
If a wallet address is passed in, this will return the user associated with that wallet.</p>
